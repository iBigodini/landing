// Generated by CoffeeScript 1.10.0
(function() {
  var Email, displayError, emailValidator, saveEmail, thankYou;

  Parse.initialize('0wZkIc6kNekDIakxZRyktsKx1O008jpSktHARDzY', 'x1NnMjHRAdZ7jzEaN7wSsqlAvKeWn3GSsL8aDzJI');

  emailValidator = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;

  Email = Parse.Object.extend('Email');

  thankYou = function() {
    $('.contact-form').css({
      display: 'none'
    });
    return $('.thank-you-message').css({
      display: 'block'
    });
  };

  displayError = function() {
    console.log('error');
    return $('.error-message').css({
      display: 'block'
    });
  };

  saveEmail = function() {
    var email, emailAddress;
    console.log('doing something...');
    emailAddress = $('#email').val();
    if (emailValidator.test(emailAddress)) {
      email = new Email();
      return email.save({
        address: emailAddress
      }).then(thankYou);
    } else {
      return displayError();
    }
  };

  $(document).on('click', '#submit', saveEmail);

}).call(this);
